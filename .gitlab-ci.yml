stages:
    - build
    - deploy
    - checklog

build:
    stage: build
    variables:
        GIT_STRATEGY: clone
    script:
        - mvn install -DskipTests=true
    tags:
        - duycaodang-server
deploy:
    stage: deploy
    variables:
        GIT_STRATEGY: none
    script:
        - echo "Running deploy stage"
        - ls -l
        - whoami
        - sudo cp target/insurtech-0.0.1-SNAPSHOT.jar /datas/insurtech
        - sudo chown insurtech. /datas/insurtech
        - sudo su insurtech -c "cd /datas/insurtech/; nohup java -jar insurtech-0.0.1-SNAPSHOT.jar 2>&1 &"
    tags:
        - duycaodang-server

